---
title: "EDLD 651 Final Project"
author: "Sara Kiros, Ohnmar Khine Min, Chen Su"
format: 
  html:
    highlight-style: espresso
    code-fold: true
execute: 
  eval: true
  echo: true
  warning: false
fig-width: 6.5
fig-height: 8
---


### 0. Loading Packages and Data

```{r}
#| label: load-packages-raw-data

library(tidyverse)
library(here)
library(rio)
library(janitor)
library(ggplot2)

pwave5 <- import(here("data", "pwave5.xpt")) |>
  characterize() |>
  clean_names() 

```


```{r}
#| label: select-variables

wave5_raw <- pwave5 |>
     select(aid, imonth5, iyear5, h5od1m, h5od1y,
            h5od2a, h5od3, h5od4a, h5od4b, h5od4c,
            h5od4d, h5od4e, h5od4f, h5od4g, h5od8,
            h5lm5, h5lm6, h5lm7, h5lm9, h5ec1, h5ec2,
            h5id9, h5id10a, h5id10b, h5id10c, h5id10d)

```



### 1. Cleaning Employment variables

```{r}
#| label: clean-employment

#Job Type
job_labels <- c(
  "1" = "Military", 
  "2" = "Private for-profit", 
  "3" = "Private nonprofit",
  "4" = "Local government",
  "5" = "State government", 
  "6" = "Federal government", 
  "7" = "Self-employed (non-inc)",
  "8" = "Self-employed (inc)",
  "9" = "Unpaid family worker"
  )


wave5_clean <- wave5_raw |> 
    mutate(
    employed = ifelse(h5lm5 == 1, "Employed",
                      ifelse(h5lm5 %in% c(2, 3), "Not employed", NA)),
    num_jobs = ifelse(h5lm6 %in% 1:4, h5lm6, NA),
    hours_work = ifelse(h5lm7 >= 5 & h5lm7 <= 90, h5lm7, NA),
     job_type = job_labels[as.character(h5lm9)]
)
  
```

### 2. Cleaning Gender Variables

```{r}

wave5_clean <- wave5_clean |> 
  mutate(
    gender = ifelse(h5od2a == 1, "Male", 
                    ifelse(h5od2a == 2, "Female", NA))
  )
```

